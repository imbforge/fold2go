process {
    withName: ALPHAFOLD {
        container  = "/fsimb/common/singularity_tools/alphafold/v2.3.2r0_hpc4/alphafold_2.3.2.sif"

        cpus       = 2
        time       = { 1.h * task.attempt }
        memory     = 16.GB

        publishDir =
            [
                [
                    path: { "${params.OUT}/${workflow.runName}/predictions/${meta}" },
                    saveAs: { it.split("/").last() }
                ]
            ]
    }
}

process {
    withName: MSA {
        container  = "/fsimb/common/singularity_tools/alphafold/v2.3.2r0_hpc4/alphafold_2.3.2.sif"
        
        cpus       = 4
        time       = { 1.h * task.attempt }
        memory     = 64.GB

        publishDir =
            [
                [
                    path: { "${params.OUT}/msa" }
                ]
            ]
    }
}